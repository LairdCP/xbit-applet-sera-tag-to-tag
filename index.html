<html>
  <head>
    <!-- $css CSS Style will be injected here -->
    <link rel="stylesheet" href="./node_modules/@bennybtl/xbit-lib/dist/xbit.css">
    <link rel="stylesheet" href="./node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="./src/style.css">
  </head>
  
  <body style="margin: 0; background-color: black;">
    <div id="main-canvas">
      <canvas id="p5-canvas"></canvas>
    </div>

    <div id="floating-buttons" class="bg-canvas-slate-800 text-gray-400">
      <div id="alert-text" class="bg-yellow-500 text-canvas-slate-800" style="display: none; position: relative; top: 0; padding: 0 6px"></div>
      <div class="flex items-center flex-col sm:flex-row" style="align-items: stretch;">
        <div class="canvas-ui-group flex items-center flex-row sm:flex-col mx-0 grow">
          <button id="start-scan" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Start Scan</button>
          <button id="lock-anchors" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Lock Anchors</button>
          <button id="toggleExtras" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Show More</button>
        </div>
        <div class="canvas-ui-group flex items-center flex-row sm:flex-col mx-0 grow">
          <div class="canvas-input grow">
            <input type="number" id="roomHeightInput"> Height <span class="units"></span>
          </div>
          <div class="canvas-input grow">
            <input type="number" id="roomWidthInput"> Width <span class="units"></span>
          </div>
          <div class="canvas-input grow">
            <input type="number" id="roomDepthInput"> Depth <span class="units"></span>
          </div>
        </div>
        <div class="canvas-ui-group flex items-center flex-row sm:flex-col mx-0 grow">
          <button id="toggle-units" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Units FT</button>
          <div class="canvas-input" title="Accuracy in positioning. (min 4cm)">
            <input type="number" id="closeEnoughDistance" style="width: 60px"> Accuracy (cm)
          </div>
        </div>
        <div id="extrasOne" class="canvas-ui-group items-center flex-row flex mx-0 grow">
          <div class="canvas-ui-group items-center flex-wrap flex-col flex mx-0">
            <div class="canvas-slider">
              <label for="roomOrientationYSlider" class="block">Rotate</label>
              <input type="range" id="roomOrientationYSlider" class="block" min="0" max="11" step="0.1" style="width: 100px"/>
            </div>
            <div class="canvas-slider">
              <label for="roomOrientationXSlider" class="block">Shift X</label>
              <input type="range" id="roomOrientationXSlider" class="block" min="0" max="6" step="0.1" style="width: 100px"/>
            </div>
            <div class="canvas-slider">
              <label for="roomOrientationZSlider" class="block">Shift Z</label>
              <input type="range" id="roomOrientationZSlider" class="block" min="0" max="6" step="0.1" style="width: 100px"/>
            </div>
          </div>
          <div class="canvas-ui-group items-center flex-row sm:flex-col sm:flex mx-0">
            <button id="flip-anchors-x" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Flip Anchors X</button>
            <button id="flip-anchors-z" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Flip Anchors Z</button>
          </div>
        </div>
        <div id="extrasThree" class="canvas-ui-group items-center flex-col flex mx-0 grow">
          <button id="toggle-overlay" class="canvas-button bg-canvas-slate-600 text-gray-10 mb-1"></button>
          <button id="show-range-spheres" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Show Range Spheres</button>
          <button id="tags-below-anchors" class="canvas-button bg-canvas-slate-600 text-gray-100 mb-1">Tags Below Anchors</button>
        </div>
      </div>
    </div>
  </body>

  <script type="module" src="./src/main.js"></script>
  <script type="module">
    document.getElementById('floating-buttons').addEventListener('mousedown', (e) => {
      e.stopPropagation()
    })
    document.getElementById('floating-buttons').addEventListener('mousedrag', (e) => {
      e.stopPropagation()
    })

    document.getElementById('toggleExtras').addEventListener('click', (e) => {
      document.getElementById('extrasOne').classList.toggle('hidden')
      // document.getElementById('extrasTwo').classList.toggle('hidden')
      document.getElementById('extrasThree').classList.toggle('hidden')
    })

    const evalWindowSize = () => {
      if (window.innerWidth < 900) {
        document.getElementById('extrasOne').classList.add('hidden')
        if (window.innerWidth < 640) {
          document.getElementById('extrasThree').classList.add('hidden')
        } else {
          document.getElementById('extrasThree').classList.remove('hidden')
        }
        // show more button
        document.getElementById('toggleExtras').classList.remove('hidden')
      } else {
          // show extrasThree
          document.getElementById('extrasOne').classList.remove('hidden')
          // hide more button
          document.getElementById('toggleExtras').classList.add('hidden')
      }
    }



    evalWindowSize()

    // on window resize
    window.addEventListener('resize', (e) => {
      evalWindowSize()

    })
  </script>
</html>